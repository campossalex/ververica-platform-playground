
---
queue_rules:
  - name: default
    conditions:
      - check-success=ci

pull_request_rules:
  - name: Auto-Merge on Label
    actions:
      queue:
        method: rebase
        rebase_fallback: null
        name: default
    conditions:
      - label=ready-to-merge
      - '#approved-reviews-by>=1'
  - name: Auto-Merge Green Backports
    actions:
      queue:
        method: rebase
        rebase_fallback: null
        name: default
    conditions:
      - label!=conflicts
      - head~=mergify/bp
  - name: backport 2.5
    actions:
      backport:
        ignore_conflicts: true
        branches:
          - 'release-2.5'
        assignees:
          - '{{author}}'
    conditions:
      - merged
      - label=release-2.5
  - name: backport 2.4
    actions:
      backport:
        ignore_conflicts: true
        branches:
          - 'release-2.4'
        assignees:
          - '{{author}}'
    conditions:
      - merged
      - label=release-2.4
  - name: backport 2.3
    actions:
      backport:
        ignore_conflicts: true
        branches:
          - 'release-2.3'
        assignees:
          - '{{author}}'
    conditions:
      - merged
      - label=release-2.3
  - name: backport 2.2
    actions:
      backport:
        ignore_conflicts: true
        branches:
          - 'release-2.2'
        assignees:
          - '{{author}}'
    conditions:
      - merged
      - label=release-2.2
  - name: backport 2.1
    actions:
      backport:
        ignore_conflicts: true
        branches:
          - 'release-2.1'
        assignees:
          - '{{author}}'
    conditions:
      - merged
      - label=release-2.1
